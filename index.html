<!doctype html><html><head>
<style>
#container,#mainMenu{height:100vh;display:flex}html{font-family:Roboto}#mainMenu{flex-direction:column;justify-content:center;align-items:center;width:100vw;background-color:#fff;position:absolute;z-index:20}#gameOptions{display:flex;flex-direction:column;margin-top:20px}#map,#pano{flex:1;display:none}#distanceButton,#forfeitButton,#timer{position:absolute;right:10px;background-color:#fff;padding:10px;border:none;cursor:pointer}#distanceButton{top:10px}#timer{top:100px}#forfeitButton{top:50px}#gameOverDistanceDialog,#loadingDialog{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10;background-color:#fff;padding:20px;border:1px solid #ccc;display:none}#startButton{padding:15px;border:none;border-radius:10px;font-size:20px;margin-top:10px;cursor:pointer}
</style>
<title>Geoguessr Clone</title></head>
<body><div id="mainMenu"><h1>Geoplacer</h1><div id="gameOptions"><label><input type="checkbox" id="timedMode"> Timed Mode</label><div id="timerOptions" style="display:none"><label>Timer Duration (minutes): <input type="number" id="timerDuration" value="1" min="1"></label></div><label><input type="checkbox" id="hardMode"> Hard Mode (No City Check)</label><label><input type="checkbox" id="noNavLinksMode"> No Nav-Links Mode</label><label><input type="checkbox" id="staticFrameMode"> Static Frame Mode</label></div><button onclick="startGame()" id="startButton">Start Game</button></div><div id="container"><div id="pano"></div><div id="map"></div></div><button id="distanceButton" onclick="checkDistance()">Check Distance</button><button id="forfeitButton" onclick="forfeit()">Forfeit</button><button id="timer"></button><div id="loadingDialog">Loading...</div><div id="gameOverDistanceDialog"><span id="resultText"></span><br><button onclick="reopenMainMenu()">Main Menu</button></div><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initialize&v=weekly" defer="defer"></script></body></html>
<script>
let streetViewLatLng,userMarker,actualMarker,map,panorama,timerInterval,isTimedMode=!1,isHardMode=!1,timerDuration;function initialize(){showLoadingDialog(!0),findRandomStreetView()}function showLoadingDialog(e){document.getElementById("loadingDialog").style.display=e?"block":"none"}function showGameOverDistanceDialog(e){document.getElementById("resultText").textContent=e,document.getElementById("gameOverDistanceDialog").style.display="block"}function closeGameOverDistanceDialog(){document.getElementById("gameOverDistanceDialog").style.display="none"}function forfeit(){resetGame(),document.getElementById("mainMenu").style.display="flex",document.getElementById("container").style.display="none",document.getElementById("distanceButton").style.display="none",document.getElementById("timer").style.display="none",document.getElementById("forfeitButton").style.display="none",clearInterval(timerInterval)}function startGame(){document.getElementById("mainMenu").style.display="none",document.getElementById("container").style.display="flex",document.getElementById("distanceButton").style.display="block",document.getElementById("timer").style.display="block",document.getElementById("forfeitButton").style.display="block",isTimedMode=document.getElementById("timedMode").checked,isHardMode=document.getElementById("hardMode").checked,isTimedMode?startTimer(timerDuration=60*document.getElementById("timerDuration").value):startStopwatch(),initialize()}function startTimer(e){let t=e,a,n;timerInterval=setInterval(function(){a=parseInt(t/60,10),n=parseInt(t%60,10),a=a<10?"0"+a:a,n=n<10?"0"+n:n,document.getElementById("timer").textContent=a+":"+n,document.getElementById("timer").style.display="block",--t<0&&(clearInterval(timerInterval),endGame())},1e3)}function startStopwatch(){let e=0,t,a;timerInterval=setInterval(function(){t=parseInt(e/60,10),a=parseInt(e%60,10),t=t<10?"0"+t:t,a=a<10?"0"+a:a,document.getElementById("timer").textContent=t+":"+a,document.getElementById("timer").style.display="block",e++},1e3)}function endGame(){disableInteraction(),checkDistance(!0)}function findRandomStreetView(){let e=0;!function t(){if(e>=10)return findRandomStreetView();new google.maps.StreetViewService().getPanorama({location:{lat:140*Math.random()-70,lng:360*Math.random()-180},radius:isHardMode?5e4:5e3},function(a,n){"OK"===n?isHardMode?new google.maps.Geocoder().geocode({location:a.location.latLng},function(n,i){"OK"===i&&n[0]?n[0].address_components.some(e=>e.types.includes("locality"))?(e++,t()):updatePanorama(a.location.latLng):(e++,t())}):updatePanorama(a.location.latLng):(e++,t())})}()}function updatePanorama(e){streetViewLatLng=e,showLoadingDialog(!1),document.getElementById("pano").style.display="block",document.getElementById("map").style.display="block";let t=document.getElementById("staticFrameMode").checked,a=document.getElementById("noNavLinksMode").checked,n=document.getElementById("pano");if(t){let i=`https://maps.googleapis.com/maps/api/streetview?size=800x600&location=${e.lat()},${e.lng()}&fov=90&heading=34&pitch=10&key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg`;n.innerHTML=`<img src="${i}" id="staticPano" style="width: 100%; height: 100%; object-fit: cover;">`}else panorama=new google.maps.StreetViewPanorama(n,{position:e,pov:{heading:34,pitch:10},addressControl:!1,linksControl:!a,clickToGo:!a,panControl:!0,zoomControl:!0,scrollwheel:!0,disableDefaultUI:!1,motionTracking:!0,motionTrackingControl:!0});(map=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:1,disableDefaultUI:!0})).addListener("click",function(e){userMarker?userMarker.setPosition(e.latLng):userMarker=new google.maps.Marker({position:e.latLng,map:map})})}function checkDistance(){if(!userMarker||!streetViewLatLng){alert("Place a pin first!");return}let e=google.maps.geometry.spherical.computeDistanceBetween(userMarker.getPosition(),streetViewLatLng)/1e3;showGameOverDistanceDialog(`Distance: ${e.toFixed(2)} km
Accuracy: ${Math.max(0,100-e/100).toFixed(2)}%`),actualMarker||(actualMarker=new google.maps.Marker({position:streetViewLatLng,map:userMarker.getMap(),icon:{url:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}}))}function reopenMainMenu(){resetGame(),closeGameOverDistanceDialog(),forfeit()}function resetGame(){userMarker&&(userMarker.setMap(null),userMarker=null),actualMarker&&(actualMarker.setMap(null),actualMarker=null),map&&(map=null),panorama&&(panorama=null),document.getElementById("timer").textContent="",clearInterval(timerInterval)}function disableInteraction(){panorama&&panorama.setOptions({disableDefaultUI:!0,clickableIcons:!1}),map&&map.setOptions({disableDefaultUI:!0,draggable:!1})}document.getElementById("timedMode").addEventListener("change",function(){document.getElementById("timerOptions").style.display=this.checked?"block":"none"}),window.initialize=initialize
</script>
